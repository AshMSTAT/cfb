{
    "contents" : "#' @title Find and Parse Kicks\n#' \n#' \n#' @export\n\n\nParsePunt <- function(x){\n  \n  #Fixing no gain...\n  x[,\"scoreText\"] <- gsub('no gain', '0 yards', x[,\"scoreText\"])\n    \n  # - Fair Catch\n  regParse = \n    paste0(\n      '([0-9]{1,4}-[A-Z]\\\\.[A-Za-z]{1,20}) '\n      ,'punts ([0-9]{1,3}) '\n      ,'yards from '\n      ,'([A-Z]{2,4}) ([0-9]{1,3}) to '\n      ,'([A-Z]{2,4}) ([0-9]{1,3}), '\n      ,'fair catch by '\n      ,'([0-9]{1,4}-[A-Z]\\\\.[A-Za-z]{1,20})\\\\.'\n    )\n  Cond <- grepl(regParse, x[,\"scoreText\"]) & !grepl('Penalty', x[,\"scoreText\"])\n  \n  x$Punt = FALSE\n  x$PuntReturn = FALSE\n  x$FairCatch = FALSE\n  x$PuntReturnYards = NA\n  \n  x$Punt[Cond] = TRUE\n  x$FairCatch[Cond] = TRUE\n  x$Kicker[Cond] = \n    gsub(regParse, '\\\\1', x[Cond,\"scoreText\"])\n  x$PuntYards[Cond] = gsub(regParse, '\\\\2', x[Cond,\"scoreText\"])\n  \n  # - Out of Bounds\n  regParse2 = \n    paste0(\n      '([0-9]{1,4}-[A-Z]\\\\.[A-Za-z]{1,20}) '\n      ,'punts ([0-9]{1,3}) '\n      ,'yards from '\n      ,'([A-Z]{2,4}) ([0-9]{1,3}), '\n      ,'out of bounds at the '\n      ,'([A-Z]{2,4}) ([0-9]{1,3})\\\\.'\n    )\n  Cond2 <- grepl(regParse2, x[,\"scoreText\"]) & !grepl('Penalty', x[,\"scoreText\"]) & !Cond\n    \n  x$Punt[Cond2] = TRUE\n  x$Kicker[Cond2] = gsub(regParse2, '\\\\1', x[Cond2,\"scoreText\"])\n  x$PuntYards[Cond2] = gsub(regParse2, '\\\\2', x[Cond2,\"scoreText\"])\n  \n  \n  # - Returned\n  regParse3 = \n    paste0(\n      '([0-9]{1,4}-[A-Z]\\\\.[A-Za-z]{1,20}) '\n      ,'punts ([0-9]{1,3}) '\n      ,'yards from '\n      ,'([A-Z]{2,4} [0-9]{1,3})\\\\. '\n      ,'([0-9]{1,4}-[A-Z]\\\\.[A-Za-z]{1,20}) '\n      ,'(runs ob at|runs to|scrambles to|to|pushed ob|pushed ob at) '\n      ,'([A-Z]{2,4} [0-9]{1,3}) for '      \n      ,'(-|)([0-9]{1,3}) (yards|yard)'\n      ,'(\\\\.| \\\\([^*]+\\\\)\\\\.)'\n    )\n  \n  Cond3 <- grepl(regParse3, x[,\"scoreText\"]) & !grepl('Penalty', x[,\"scoreText\"]) & !Cond & !Cond2\n  \n  x$Punt[Cond3] = TRUE\n  x$PuntReturn[Cond3] = TRUE\n  x$Kicker[Cond3] = gsub(regParse3, '\\\\1', x[Cond3,\"scoreText\"])\n  x$PuntYards[Cond3] = gsub(regParse3, '\\\\2', x[Cond3,\"scoreText\"])\n  x$PuntReturnYards[Cond3] = gsub(regParse3, '\\\\7\\\\8', x[Cond3,\"scoreText\"])\n  \n  # - Touchback\n  regParse4 = \n    paste0(\n      '([0-9]{1,4}-[A-Z]\\\\.[A-Za-z]{1,20}) '\n      ,'punts ([0-9]{1,3}) '\n      ,'yards from '\n      ,'([A-Z]{2,4}) ([0-9]{1,3}) to '\n      ,'([A-Z]{2,4}) (End Zone|[0-9]{1,3})\\\\. '\n      ,'touchback\\\\.'\n    )\n  Cond4 <- grepl(regParse4, x[,\"scoreText\"]) & !grepl('Penalty', x[,\"scoreText\"]) & !Cond & !Cond2 & !Cond3\n    \n  x$Punt[Cond4] = TRUE\n  x$Kicker[Cond4] = gsub(regParse4, '\\\\1', x[Cond4,\"scoreText\"])\n  x$PuntYards[Cond4] = gsub(regParse4, '\\\\2', x[Cond4,\"scoreText\"])\n  \n  # - Downed\n  regParse5 = \n    paste0(\n      '([0-9]{1,4}-[A-Z]\\\\.[A-Za-z]{1,20}) '\n      ,'punts ([0-9]{1,3}) '\n      ,'yards from '\n      ,'([A-Z]{2,4}) ([0-9]{1,3})'\n      ,'( Downed at the | to the )'\n      ,'([A-Z]{2,4}) ([0-9]{1,3})(\\\\.|\\\\, downed by [0-9]{1,4}-[A-Z]\\\\.[A-Za-z]{1,20}\\\\.)'\n    )\n  Cond5 <- grepl(regParse5, x[,\"scoreText\"]) & !grepl('Penalty', x[,\"scoreText\"]) & !Cond & !Cond2 & !Cond3 & !Cond4\n    \n  x$Punt[Cond5] = TRUE\n  x$Kicker[Cond5] = gsub(regParse5, '\\\\1', x[Cond5,\"scoreText\"])\n  x$PuntYards[Cond5] = gsub(regParse5, '\\\\2', x[Cond5,\"scoreText\"])\n  x$PuntReturn[Cond5] = TRUE\n  x$PuntReturnYards[Cond5] = 0\n  \n  x$PuntYards = as.numeric(x$PuntYards)\n  x$PuntReturnYards = as.numeric(x$PuntReturnYards)\n  x\n}\n",
    "created" : 1422849223030.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "2233682416",
    "id" : "B3214DEB",
    "lastKnownWriteTime" : 1423801459,
    "path" : "~/Dropbox/cfb/R/ParsePunt.R",
    "project_path" : "R/ParsePunt.R",
    "properties" : {
        "tempName" : "Untitled2"
    },
    "relative_order" : 0,
    "source_on_save" : false,
    "type" : "r_source"
}